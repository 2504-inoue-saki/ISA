<!DOCTYPE html>
<<<<<<< HEAD
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${currentYear} + '年' + ${currentMonth} + '月 ホーム画面'">ホーム画面</title>
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script th:src="@{/js/confirmation.js}" charset="utf-8"></script>
</head>
<body>
<header th:replace="~{fragments/header :: commonHeader(
        ${currentYear} + '年' + ${currentMonth} + '月 勤怠入力',  false,                                            ${isLoggedIn},
        ${userCategory},
        ${currentPage}
    )}"></header>

<div class="attendance-container">
    <div class="month-navigation">
        <span class="current-month-display" th:text="${currentYear} + '年' + ${currentMonth} + '月'"></span>
    </div>

    <form id="attendanceForm" th:action="@{/monthWork/save}" th:object="${workingMonthForm}" method="post">
        <input type="hidden" th:field="*{year}"/>
        <input type="hidden" th:field="*{month}"/>
        <input type="hidden" th:field="*{userId}"/> <div class="attendance-table-container">
    </div>

        <div class="attendance-table-container">
            <table class="attendance-table">
                <thead>
                <tr>
                    <th>日付</th>
                    <th>曜日</th>
                    <th>勤務区分</th>
                    <th>出勤</th>
                    <th>退勤</th>
                    <th>休憩開始</th>
                    <th>休憩終了</th>
                    <th>メモ</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="workingEntry, stat : *{workings}">
                    <td th:text="${#temporals.format(workingEntry.date, 'yyyy-MM-dd')}">YYYY-MM-DD</td>
                    <td th:text="${workingEntry.dayOfWeek}">曜日</td>
                    <td>
                        <select th:field="*{workings[__${stat.index}__].status}">
                            <option value="-1">未入力</option>
                            <option value="0">出勤</option>
                            <option value="1">リモート</option>
                            <option value="2">有給</option>
                            <option value="2">欠勤</option>
                        </select>
                    </td>

                    <input type="hidden" th:field="*{workings[__${stat.index}__].id}"/>
                    <input type="hidden" th:field="*{workings[__${stat.index}__].userId}"/>
                    <input type="hidden" th:field="*{workings[__${stat.index}__].date}"/>

                    <td><input type="time" th:field="*{workings[__${stat.index}__].startWork}"/></td>
                    <td><input type="time" th:field="*{workings[__${stat.index}__].endWork}"/></td>
                    <td><input type="time" th:field="*{workings[__${stat.index}__].startBreak}"/></td>
                    <td><input type="time" th:field="*{workings[__${stat.index}__].endBreak}"/></td>
                    <td><input type="text" th:field="*{workings[__${stat.index}__].memo}"/></td>
                    <td>
                        <button type="button" class="reset-button" onclick="resetWorkingEntry(this)">リセット</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="form-actions">
            <button type="submit" class="primary-button">入力内容を保存</button>
        </div>
    </form>
</div>

<script>
    function resetWorkingEntry(button) {
        const row = button.closest('tr');
        row.querySelector('select[name$=".status"]').value = '-1'; // "未入力" に設定
        row.querySelector('input[type="time"][name$=".startWork"]').value = '';
        row.querySelector('input[type="time"][name$=".endWork"]').value = '';
        row.querySelector('input[type="time"][name$=".startBreak"]').value = '';
        row.querySelector('input[type="time"][name$=".endBreak"]').value = '';
        row.querySelector('input[type="text"][name$=".memo"]').value = '';
    }
</script>

=======
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <!--    <link href="/css/style.css" rel="stylesheet">-->
    <title>月毎勤怠編集</title>
</head>
<body>
日付：<input type="date" name="start" th:value="${start}">～<input type="date" name="end" th:value="${end}">
<!--<div class="errorMessages" th:each="errorMessage : ${errorMessages}" th:if="${errorMessages != null}">-->
<!--    <span th:text="${errorMessage}"></span>-->
<!--</div>-->
<form th:action="@{/monthWork/save}" th:method="put" >
    <table>
        <tr>
            <th>日付</th>
            <th>勤務区分</th>
            <th>開始</th>
            <th>終了</th>
            <th>休憩時間</th>
            <th>労働時間</th>
            <th>申請状況</th>
            <th>メモ</th>
        </tr>
        <div class="work" th:each="month : ${monthWork}">
            <tr>
                <td><input  type="text" th:field="*{date}"></td>
                <td>
                    <select th:field="$*{attend}">
                        <option value="o">出勤</option>
                        <option value="1">リモート</option>
                    </select>
                </td>
                <td> <input type="text" th:field="${month.start_work}"></td>
                <td> <input type="text" th:field="${month.end_work}"></td>
                <td> <input type="text" th:field="${month.break}"></td>
                <td> <input type="text" th:field="${month.work}"></td>
                <td>
                    <select th:field="${month.status}">
                        <option value="0">未申請</option>
                        <option value="1">申請済み</option>
                        <option value="2">申請済みかつ承認</option>
                        <option value="3">申請済みかつ差し戻し</option>
                    </select>
                </td>
                <td> <input type="text" th:field="${month.memo}"></td>
            </tr>
        </div>
    </table>
    <input type="submit" value="更新">
</form>
>>>>>>> 15df05c15f164d68f93ae362b9a4a7954749413b
</body>
</html>